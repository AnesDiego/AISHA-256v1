/* PinchZoom.js v2.4.1 - https://github.com/manuelstofer/pinchzoom */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).PinchZoom=t()}(this,function(){function e(e,t){var n=Object.create(e.prototype);return t.apply(n),n}function t(){return"undefined"!=typeof window&&!!window.PointerEvent}function n(e,t,n){e.addEventListener(t,n,{passive:!1})}function o(e,t,n){e.removeEventListener(t,n,{passive:!1})}function i(e){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)}function r(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function a(e,t,n,o){return Math.max(Math.min(e,o),n)}function u(e){return{width:e.offsetWidth,height:e.offsetHeight}}var c=function(e){function t(t,n){void 0===t&&(t={}),void 0===n&&(n={}),this.options=t,this.element=n.element,this.zoomFactor=t.zoomFactor||10,this.zoomStartScale=1,this.scale=1,this.offset={x:0,y:0},this.initialOffset={x:0,y:0},this.options.maxZoom=this.zoomFactor,this.init()}return t.prototype.init=function(){var e=this;this.element.style.touchAction="none",this.element.style.userSelect="none",this.element.style.webkitUserSelect="none",this.element.style.msUserSelect="none",this.element.style.MozUserSelect="none";var t=this.element.querySelector("img");this.img=t,this.img.style.transformOrigin="0 0",this.img.style.transition="transform .2s cubic-bezier(.4,0,.2,1)",this.img.style.willChange="transform",this.img.ondragstart=function(e){return e.preventDefault()},n(this.element,"wheel",function(t){return e.handleWheel(t)}),n(this.element,"pointerdown",function(t){return e.handlePointerDown(t)}),this.lastTouches=[],this.lastPointerDistance=0,this.pointers=[],this.img.addEventListener("dblclick",function(t){e.scale>1?e.zoomOut():e.zoomIn(t)})},t.prototype.handleWheel=function(e){e.preventDefault();var t=e.deltaY<0?1.1:.9;this.zoomAtPoint(t,e.clientX-this.element.getBoundingClientRect().left,e.clientY-this.element.getBoundingClientRect().top)},t.prototype.handlePointerDown=function(e){var t=this;this.pointers.push(e),this.element.setPointerCapture(e.pointerId),n(this.element,"pointermove",this.handlePointerMove.bind(this)),n(this.element,"pointerup",function n(e){t.handlePointerUp(e),o(t.element,"pointermove",t.handlePointerMove.bind(t)),o(t.element,"pointerup",n)}),this.startScale=this.scale,this.startOffset={x:this.offset.x,y:this.offset.y},2===this.pointers.length&&(this.lastPointerDistance=r({x:this.pointers[0].clientX,y:this.pointers[0].clientY},{x:this.pointers[1].clientX,y:this.pointers[1].clientY}),this.zoomStartScale=this.scale)},t.prototype.handlePointerMove=function(e){for(var t=0;t<this.pointers.length;t++)if(this.pointers[t].pointerId===e.pointerId){this.pointers[t]=e;break}if(2===this.pointers.length){var n=r({x:this.pointers[0].clientX,y:this.pointers[0].clientY},{x:this.pointers[1].clientX,y:this.pointers[1].clientY}),o=n/this.lastPointerDistance;this.scale=a(this.zoomStartScale*o,1,this.zoomFactor)}else if(1===this.pointers.length){var i=e.clientX-this.pointers[0].clientX,o=e.clientY-this.pointers[0].clientY;this.offset.x=this.startOffset.x+i,this.offset.y=this.startOffset.y+o}this.update()},t.prototype.handlePointerUp=function(e){for(var t=0;t<this.pointers.length;t++)if(this.pointers[t].pointerId===e.pointerId){this.pointers.splice(t,1);break}},t.prototype.zoomAtPoint=function(e,t,n){var o=this.scale;e=a(this.scale*e,1,this.zoomFactor),this.scale=e;var i=this.img.width*this.scale/2-this.img.width*o/2,r=this.img.height*this.scale/2-this.img.height*o/2;this.offset.x-=(t-i),(this.offset.x=a(this.offset.x,-this.img.width*this.scale+this.element.offsetWidth,0)),this.offset.y-=(n-r),(this.offset.y=a(this.offset.y,-this.img.height*this.scale+this.element.offsetHeight,0)),this.update()},t.prototype.zoomIn=function(e){var t=e.offsetX||this.element.offsetWidth/2,n=e.offsetY||this.element.offsetHeight/2;this.zoomAtPoint(2,t,n)},t.prototype.zoomOut=function(){this.scale=1,this.offset={x:0,y:0},this.update()},t.prototype.update=function(){this.img.style.transform="scale("+this.scale+") translate("+this.offset.x+"px,"+this.offset.y+"px)"},t}();
return function(t){return new c({},t)};
});